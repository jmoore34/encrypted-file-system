# Encrypted File System

A BitLocker-like virtual encrypted filesystem created for [CS 6324](https://crs.s3lab.io/cs6324/2021/spring/sched.html).

***Note: In the interest of academic integrity, the source code of this project is not publicly available. Please contact me if you would like a demo.***

## Features

User files are transparently split into chunks encrypted with AES-CTR, allowing for random read/write access within a file. A metadata header file contians the IV, password salt & hash, username, and encrypted file length. The header & each chunk also have an encrypted HMAC, allowing for a full integrity audit.

## Technical Summary

The virtual file system is implemented in Java. When a file is created, a secure PRNG is used to generate the password salt and intialization vector. The user supplies a password which is salted, hashed, and stored in the header file along with the file size (i.e., 0 bytes when created). The file size is encrypted in order to prevent a length-based sidechannel attack. The encryption/decryption key is generated by passing the password through a KDF.

A file, e.g. "myfile.txt" is stored as a directory of the same name containing a series of numbered files.

```cmd
> tree .

C:\USERS\JON\.TMP\MYFILE.TXT
├───0
├───1
├───2
├───3
└───4
```

`0` is the metadata header file, `1` contains the first `992` bytes of (encrypted) data, `2` contains the next `992` bytes of (encrypted) data, and so on. Pre-encryption data padding is used such that the file size does not have to be a multiple of 992.

The header file and each numbered content file each contain a encrypted hash of the contents.
